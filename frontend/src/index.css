@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Krovaa Midnight Theme */
    --background: 235 50% 5%;
    --foreground: 210 40% 98%;

    --card: 235 45% 8%;
    --card-foreground: 210 40% 98%;

    --popover: 235 45% 8%;
    --popover-foreground: 210 40% 98%;

    /* Krovaa Electric Blue */
    --primary: 221 83% 53%;
    --primary-foreground: 210 40% 98%;

    --secondary: 235 30% 12%;
    --secondary-foreground: 210 40% 90%;

    --muted: 235 25% 15%;
    --muted-foreground: 215 20% 65%;

    --accent: 217 91% 60%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    --border: 235 20% 18%;
    --input: 235 20% 18%;
    --ring: 221 83% 53%;

    --radius: 1rem;

    --sidebar-background: 235 45% 6%;
    --sidebar-foreground: 210 40% 90%;
    --sidebar-primary: 221 83% 53%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 235 30% 15%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 235 20% 18%;
    --sidebar-ring: 221 83% 53%;
  }

}

@layer base {
  * {
    @apply border-border;
  }

  html,
  body,
  #root {
    height: 100%;
    min-height: 100%;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Rubik', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    background-image:
      radial-gradient(at 0% 0%, hsla(221, 83%, 53%, 0.05) 0px, transparent 50%),
      radial-gradient(at 100% 0%, hsla(217, 91%, 60%, 0.05) 0px, transparent 50%);
    background-attachment: fixed;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'Rubik', sans-serif;
    letter-spacing: 0;
    font-weight: 600;
  }

  ::selection {
    background-color: hsl(var(--primary) / 0.3);
    color: hsl(var(--foreground));
  }
}

/* Custom Scrollbar for Krovaa */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted));
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--primary) / 0.5);
}

/* Glassmorphism Classes */
.glass {
  @apply bg-white/[0.03] backdrop-blur-xl border border-white/[0.05];
}

.glass-dark {
  @apply bg-black/40 backdrop-blur-2xl border border-white/[0.05];
}

/* Feature Animations */
@keyframes float {
  0% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-10px);
  }

  100% {
    transform: translateY(0px);
  }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}


/* Privacy & Screenshot Protection */
.privacy-protected {
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  -webkit-touch-callout: none !important;
  /* Disable long-press on iOS */
  -webkit-user-drag: none !important;
  pointer-events: auto !important;
}

/* Prevent text selection globally on chat content */
.chat-view,
.chat-message {
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

/* Protect images from being saved */
.privacy-protected img,
.chat-message img {
  user-select: none !important;
  -webkit-user-drag: none !important;
  pointer-events: none !important;
}

/* Disable context menu */
.privacy-protected,
.chat-message {
  -webkit-touch-callout: none !important;
}

/* Print Protection */
@media print {
  body * {
    visibility: hidden !important;
  }

  .print-hidden,
  #root,
  .chat-container,
  .chat-view {
    display: none !important;
  }

  body::after {
    content: "Screen capture and printing are disabled for privacy.";
    visibility: visible;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 20px;
    font-weight: bold;
    color: black;
    z-index: 9999;
  }
}

/* Blur protection for focus loss */
.blur-privacy {
  filter: blur(30px) grayscale(1) brightness(0.7);
  pointer-events: none;
  transition: filter 0.2s ease;
  position: relative;
  z-index: 99;
}

/* Ensure overlay doesn't block on viewport change */
.blur-privacy::after {
  display: none;
}

/* Screenshot attempted warning */
html.screenshot-attempted {
  filter: blur(20px) grayscale(1);
  animation: screenshot-block 0.3s ease-out;
}

@keyframes screenshot-block {
  0% {
    filter: blur(10px);
  }

  50% {
    filter: blur(30px) brightness(0.5);
  }

  100% {
    filter: blur(20px) grayscale(1);
  }
}

/* Mobile screenshot protection */
html.mobile-screen-blur {
  filter: blur(25px) grayscale(1) brightness(0.7);
  animation: mobile-screenshot-block 0.25s ease-out;
  pointer-events: none;
}

@keyframes mobile-screenshot-block {
  0% {
    filter: blur(8px) brightness(0.9);
  }

  50% {
    filter: blur(35px) grayscale(1) brightness(0.5);
  }

  100% {
    filter: blur(25px) grayscale(1) brightness(0.7);
  }
}

/* Automatically clear mobile blur on desktop/larger screens */
@media (min-width: 768px) {
  html.mobile-screen-blur {
    filter: none !important;
    animation: none !important;
    pointer-events: auto !important;
  }
}

/* Periodic blur animation for mobile */
@keyframes periodic-blur {

  0%,
  100% {
    filter: none;
  }

  20% {
    filter: blur(2px);
  }

  50% {
    filter: blur(15px) grayscale(0.5);
  }

  80% {
    filter: blur(2px);
  }
}

html.mobile-screen-blur .chat-message-container {
  animation: periodic-blur 2.5s ease-in-out !important;
}

/* Hide navbar utility */
.hide-navbar .bottom-navbar {
  display: none !important;
}

.hide-navbar .main-wrapper {
  padding-bottom: 0 !important;
}

/* Enhanced chat message protection */
.chat-message {
  /* Prevent dragging */
  -webkit-user-drag: none !important;
  user-drag: none !important;

  /* Disable selection by default but allow interaction */
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;

  /* Mobile-specific protections */
  touch-action: manipulation !important;
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
}

/* Prevent mobile screenshot gestures */
@media (max-width: 768px) {
  * {
    -webkit-user-select: none !important;
    -webkit-user-drag: none !important;
    -webkit-touch-callout: none !important;
    user-select: none !important;
  }

  /* Allow input to still be usable */
  input,
  textarea,
  a {
    -webkit-user-select: text !important;
    user-select: text !important;
  }

  .chat-message {
    /* Extra protection for message content */
    position: relative;
    z-index: 10;

    /* Prevent accessibility overlays from capturing */
    -webkit-user-select: none !important;
    user-select: none !important;
    -webkit-user-drag: none !important;
  }

  /* Prevent gesture-based zoom that enables screenshot */
  html {
    touch-action: manipulation !important;
    user-select: none !important;
  }

  /* Disable pinch zoom */
  html *:not(input):not(textarea) {
    touch-action: manipulation !important;
  }
}

/* Prevent copy protection on message content */
.chat-message * {
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

/* Protect input from pasting sensitive content */
[data-nopaste] {
  -webkit-user-select: text !important;
  user-select: text !important;
}

/* Protect context menu items */
[data-nocontext] {
  /* This is handled by JavaScript event listeners */
}

/* Hide elements during screen recording on iOS */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-top: max(0px, env(safe-area-inset-top));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
}